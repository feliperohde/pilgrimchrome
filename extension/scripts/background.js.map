{"version":3,"sources":["source/_scripts/node_modules/browser-pack/_prelude.js","source/_scripts/source/_modules/pilgrim/pilgrim.js","source/_scripts/source/_scripts/background.js"],"names":[],"mappings":"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","file":"background.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","export default class Pilgrim {\n  constructor(options) {\n    console.log('Pilgrim module');\n\n    var defaults = {\n\n      // cookiesRequests: [\n      //   {method: \"getCookies\", args: {url: 'http://pilgrim.itelios.net', name: 'Language'}},\n      //   {method: \"getCookies\", args: {url: 'http://pilgrim.itelios.net', name: 'pilcook_prj'}},\n      //   {method: \"getCookies\", args: {url: 'http://pilgrim.itelios.net', name: 'pilgrimAuthCookie'}},\n      //   {method: \"getCookies\", args: {url: 'http://pilgrim.itelios.net', name: '.ASPXROLES'}}\n      // ],\n\n      cookies: [],\n      isSyncedCookies: false,\n\n      domain: 'http://pilgrim.itelios.net',\n\n\n      tasks: {},\n\n      getGroupTaskUri: 'http://pilgrim.itelios.net/Task/getGroupTasks', /*\n\n      post\n      headers:\n      query: ?prjId=3995797f-9a8a-4d36-8f01-079c6edb4f24\n      {\n\n      }\n\n\n       */\n      createTask: 'http://pilgrim.itelios.net/Task/Create/' /*\n\n      post\n      headers:\n      data:\n      {\n        ProjectID: '95e09e2b-a45b-4113-8d92-79abfb881441' // interno,\n        cbPrjModeID: 1,\n        IsChecked: 0,\n        TaskGroupID: 'c9ebb70c-2789-4ca6-9df9-1b6bd80dcc49' // tarefas nao faturadas\n        TimeSheetDate: 22/05/2017,\n        Name: 'nome da task',\n        taskStartDate: '23/05/2017 00:00:00',\n        taskEndDate: '24/05/2017 00:00:00',\n        PlannedWork: 20\n      }\n\n      */\n\n    };\n\n    this.options = Object.assign({}, defaults, options);\n\n    this._syncCookies(function (data) {\n      this.options.isSyncedCookies = true;\n\n      this._up();\n\n    }.bind(this));\n\n    //mÃ©todos expostos\n\n    this.listem =  this._listemEvents;\n\n  };\n\n  _listemEvents () {\n\n    chrome.runtime.onMessage.addListener(function(request, sender, sendResponse) {\n\n      console.log(request);\n\n      switch(request.method) {\n        case 'syncTasks':\n\n          this._postTasks();\n\n        break;\n\n        case 'receiveTasks':\n\n          this._receiveTasks(request.args.list);\n\n\n        default:\n          console.log('Invalid...');\n      }\n\n\n    }.bind(this));\n\n  };\n\n  _up () {\n    console.log(this.options.cookies);\n\n    console.log('pronto para sincronizar e fazer qqr coisa no pilgrim...');\n  };\n\n  _receiveTasks (list) {\n\n      if(!list.length) return;\n\n      this.options.tasks = list;\n\n\n  };\n\n  _getCookie (name) {\n      for (var i = this.options.cookies.length - 1; i >= 0; i--) {\n\n        if(this.options.cookies[i].name === name)\n          return this.options.cookies[i];\n      }\n  };\n\n  _getAllCookies (domain, callback) {\n      chrome.cookies.getAll({\"url\": domain}, function(allCookies) {\n          if(callback) {\n              callback(allCookies);\n          }\n      });\n  };\n\n  _syncCookies (callback) {\n\n    this._getAllCookies(this.options.domain, function (data) {\n\n      this.options.cookies = data;\n\n      if(callback) {\n        callback(data);\n      }\n\n    }.bind(this));\n\n  };\n\n  //simula um post no pilgrim para cadastrar uma task inexistente\n  _postTask (task) {\n\n    console.log(task);\n\n    let cookie_lang =  this._getCookie('Language');\n    let cookie_pilgrimAuthCookie = this._getCookie('pilgrimAuthCookie');\n    let cookie_ASPXROLES = this._getCookie('.ASPXROLES');\n\n    // let header_cookie = \"Language=En; pilgrimAuthCookie=605E4E05C66E45307CB1DE8F875EA2ABA6633429838B6E0F19E9C9EAFF2DDBAF79BC7BF24EBDC4B38AD2ECADD91E6208A93FF5268FD976DB8CCF450CC59C96F148FE0746A610B681BB87F281601E1988B4703F2235096A403C61A4D1E24C245611F420735F6CDF303F6A02E4885435E446DEC5C3E782E84C3BD60BB7150A7FFDC783BB7C12833D41A5295E14BD5585A3; .ASPXROLES=_s0efXAmrBdhKQDLi0X-BuRzF8wK-i0dJ-FDGyCVuun6q06qjOZB2xfzsBbp2a5FWvd87BZnZxuoyTohRhB4W6zIOjND1-Xj1F_Xs25DbJMCXcL6-DIcJABNiAV2z0aR2tkmPnUd-k6Jx7RjfbosxHboUR0E1XLQjbAitxijG75jwsmbxjIzSXCwvHxJiPDAXrgPVaFFjpSfwXx88pNaDxaD_UMygiyI3EwBSrdzNnt1NcsRpCkTaqIMmrllBVReJ8qqKzSShd4frBVJ84btJMcKm1pb-XK-SppX-6T5ANxx62XFY4c1u1SbqDvCVH2eX2Di46KcIBR7wpHbkSppMGoHNHaOHTGNc0qQADXYnHvTipaRbvNCk2nCYbpOh0SlYgU0FBSyIYXVULRQ6z2vPx49dLdQEdoq2kAloZQa3HVxcbDY1qEfVzVEcoDJwfNxraouIpvdRi4TZDAz7WDHJKAtFm_ukYWqHevUo13chHzJ-mzG_XbmFP_Xqy_8-aMfkP_oEU5gxO1J47LLIrzDXut3C1kzn9f2VjDHxQZXLFnfyPbtrPlbAxaEQ7xBy1mME1ys3X8cPnqd4itcK5sWSulAz7zJrNStcsTFTjOgPh4fh6vnGvhpIdw5eW8rNMRIP2ASfljVrsvjlLYQ6Giza2nWETE6LQEusSKa_ScD0PJvbvLJTqgmMwC8uXm7L3951GYnDg03PA_n2Wl5rMjeRp1jtkN_rfgDyhbtFSqL_q_HfGcgJiM7lr8IjeEKre36WNQBloeUuWiAKmRrSXQ9dQVFZ-MWbdVtDmMXsrh5lbuXgxggcr9GbhgUxiBqjFIJ0\"\n    let header_cookie = \"Language=\" + cookie_lang.value + \"; pilgrimAuthCookie=\" + cookie_pilgrimAuthCookie.value + \"; .ASPXROLES=\" + cookie_ASPXROLES.value + \"\"\n\n\n    // var myheaders = new Headers();\n\n    let myheaders = {\n      'Accept': '*/*',\n      'Accept-Encoding': 'gzip, deflate, sdch',\n      'Accept-Language': 'en-US,en;q=0.8',\n      'X-Requested-With': 'XMLHttpRequest',\n      'Cookie': header_cookie\n    };\n\n    console.log(myheaders);\n\n    let body = {\n      ProjectID: '95e09e2b-a45b-4113-8d92-79abfb881441', // interno,\n      cbPrjModeID: 1,\n      IsChecked: 0,\n      TaskGroupID: 'c9ebb70c-2789-4ca6-9df9-1b6bd80dcc49', // tarefas nao faturadas\n      TimeSheetDate: \"22/05/2017\",\n      Name: task.excerpt,\n      taskStartDate: '23/05/2017 00:00:00',\n      taskEndDate: '24/05/2017 00:00:00',\n      PlannedWork: 20\n    };\n\n\n    // url (required), options (optional)\n    fetch(this.options.createTask, {\n\n      method: 'POST',\n      mode: 'cors',\n      headers: new Headers(myheaders),\n      body: JSON.stringify(body)\n\n    }).then(function(response) {\n\n      console.log(response);\n\n    }).catch(function(err) {\n      // Error :(\n    });\n\n  };\n\n\n  //pega uma lista de tarefas e itera mandando para o metodo postTask\n  _postTasks () {\n\n    for (var i = this.options.tasks.length - 1; i >= 0; i--) {\n      this._postTask(this.options.tasks[i]);\n    };\n\n  };\n\n}","// Main javascript entry point\n// Should handle bootstrapping/starting application\n\n//import $ from 'jquery';\nimport Pilgrim from '../_modules/pilgrim/pilgrim';\n// import css from '../_styles/css_map_all.json';\n\n'use strict';\n\n\nvar pilgrim = new Pilgrim();\n\npilgrim.listem();"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzb3VyY2UvX21vZHVsZXMvcGlsZ3JpbS9waWxncmltLmpzIiwic291cmNlL19zY3JpcHRzL2JhY2tncm91bmQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7O0lDQXFCLE87QUFDbkIsbUJBQVksT0FBWixFQUFxQjtBQUFBOztBQUNuQixZQUFRLEdBQVIsQ0FBWSxnQkFBWjs7QUFFQSxRQUFJLFdBQVc7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGVBQVMsRUFUSTtBQVViLHVCQUFpQixLQVZKOztBQVliLGNBQVEsNEJBWks7O0FBZWIsYUFBTyxFQWZNOztBQWlCYix1QkFBaUIsK0NBakJKLEVBaUJxRDs7Ozs7OztBQVdsRSxrQkFBWSx5Q0E1QkMsQ0E0QnlDOzs7Ozs7Ozs7Ozs7Ozs7OztBQTVCekMsS0FBZjs7QUFpREEsU0FBSyxPQUFMLEdBQWUsT0FBTyxNQUFQLENBQWMsRUFBZCxFQUFrQixRQUFsQixFQUE0QixPQUE1QixDQUFmOztBQUVBLFNBQUssWUFBTCxDQUFrQixVQUFVLElBQVYsRUFBZ0I7QUFDaEMsV0FBSyxPQUFMLENBQWEsZUFBYixHQUErQixJQUEvQjs7QUFFQSxXQUFLLEdBQUw7QUFFRCxLQUxpQixDQUtoQixJQUxnQixDQUtYLElBTFcsQ0FBbEI7O0FBT0E7O0FBRUEsU0FBSyxNQUFMLEdBQWUsS0FBSyxhQUFwQjtBQUVEOzs7O29DQUVnQjs7QUFFZixhQUFPLE9BQVAsQ0FBZSxTQUFmLENBQXlCLFdBQXpCLENBQXFDLFVBQVMsT0FBVCxFQUFrQixNQUFsQixFQUEwQixZQUExQixFQUF3Qzs7QUFFM0UsZ0JBQVEsR0FBUixDQUFZLE9BQVo7O0FBRUEsZ0JBQU8sUUFBUSxNQUFmO0FBQ0UsZUFBSyxXQUFMOztBQUVFLGlCQUFLLFVBQUw7O0FBRUY7O0FBRUEsZUFBSyxjQUFMOztBQUVFLGlCQUFLLGFBQUwsQ0FB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RDtpQ0FDYzs7QUFFWixXQUFLLElBQUksSUFBSSxLQUFLLE9BQUwsQ0FBYSxLQUFiLENBQW1CLE1BQW5CLEdBQTRCLENBQXpDLEVBQTRDLEtBQUssQ0FBakQsRUFBb0QsR0FBcEQsRUFBeUQ7QUFDdkQsYUFBSyxTQUFMLENBQWUsS0FBSyxPQUFMLENBQWEsS0FBYixDQUFtQixDQUFuQixDQUFmO0FBQ0Q7QUFFRjs7Ozs7O2tCQTVNa0IsTzs7Ozs7O0FDSXJCOzs7Ozs7QUFDQTs7QUFFQSxhLENBUEE7QUFDQTs7QUFFQTs7O0FBT0EsSUFBSSxVQUFVLHVCQUFkOztBQUVBLFFBQVEsTUFBUiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQaWxncmltIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIGNvbnNvbGUubG9nKCdQaWxncmltIG1vZHVsZScpO1xuXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuXG4gICAgICAvLyBjb29raWVzUmVxdWVzdHM6IFtcbiAgICAgIC8vICAge21ldGhvZDogXCJnZXRDb29raWVzXCIsIGFyZ3M6IHt1cmw6ICdodHRwOi8vcGlsZ3JpbS5pdGVsaW9zLm5ldCcsIG5hbWU6ICdMYW5ndWFnZSd9fSxcbiAgICAgIC8vICAge21ldGhvZDogXCJnZXRDb29raWVzXCIsIGFyZ3M6IHt1cmw6ICdodHRwOi8vcGlsZ3JpbS5pdGVsaW9zLm5ldCcsIG5hbWU6ICdwaWxjb29rX3Byaid9fSxcbiAgICAgIC8vICAge21ldGhvZDogXCJnZXRDb29raWVzXCIsIGFyZ3M6IHt1cmw6ICdodHRwOi8vcGlsZ3JpbS5pdGVsaW9zLm5ldCcsIG5hbWU6ICdwaWxncmltQXV0aENvb2tpZSd9fSxcbiAgICAgIC8vICAge21ldGhvZDogXCJnZXRDb29raWVzXCIsIGFyZ3M6IHt1cmw6ICdodHRwOi8vcGlsZ3JpbS5pdGVsaW9zLm5ldCcsIG5hbWU6ICcuQVNQWFJPTEVTJ319XG4gICAgICAvLyBdLFxuXG4gICAgICBjb29raWVzOiBbXSxcbiAgICAgIGlzU3luY2VkQ29va2llczogZmFsc2UsXG5cbiAgICAgIGRvbWFpbjogJ2h0dHA6Ly9waWxncmltLml0ZWxpb3MubmV0JyxcblxuXG4gICAgICB0YXNrczoge30sXG5cbiAgICAgIGdldEdyb3VwVGFza1VyaTogJ2h0dHA6Ly9waWxncmltLml0ZWxpb3MubmV0L1Rhc2svZ2V0R3JvdXBUYXNrcycsIC8qXG5cbiAgICAgIHBvc3RcbiAgICAgIGhlYWRlcnM6XG4gICAgICBxdWVyeTogP3ByaklkPTM5OTU3OTdmLTlhOGEtNGQzNi04ZjAxLTA3OWM2ZWRiNGYyNFxuICAgICAge1xuXG4gICAgICB9XG5cblxuICAgICAgICovXG4gICAgICBjcmVhdGVUYXNrOiAnaHR0cDovL3BpbGdyaW0uaXRlbGlvcy5uZXQvVGFzay9DcmVhdGUvJyAvKlxuXG4gICAgICBwb3N0XG4gICAgICBoZWFkZXJzOlxuICAgICAgZGF0YTpcbiAgICAgIHtcbiAgICAgICAgUHJvamVjdElEOiAnOTVlMDllMmItYTQ1Yi00MTEzLThkOTItNzlhYmZiODgxNDQxJyAvLyBpbnRlcm5vLFxuICAgICAgICBjYlByak1vZGVJRDogMSxcbiAgICAgICAgSXNDaGVja2VkOiAwLFxuICAgICAgICBUYXNrR3JvdXBJRDogJ2M5ZWJiNzBjLTI3ODktNGNhNi05ZGY5LTFiNmJkODBkY2M0OScgLy8gdGFyZWZhcyBuYW8gZmF0dXJhZGFzXG4gICAgICAgIFRpbWVTaGVldERhdGU6IDIyLzA1LzIwMTcsXG4gICAgICAgIE5hbWU6ICdub21lIGRhIHRhc2snLFxuICAgICAgICB0YXNrU3RhcnREYXRlOiAnMjMvMDUvMjAxNyAwMDowMDowMCcsXG4gICAgICAgIHRhc2tFbmREYXRlOiAnMjQvMDUvMjAxNyAwMDowMDowMCcsXG4gICAgICAgIFBsYW5uZWRXb3JrOiAyMFxuICAgICAgfVxuXG4gICAgICAqL1xuXG4gICAgfTtcblxuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgIHRoaXMuX3N5bmNDb29raWVzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuaXNTeW5jZWRDb29raWVzID0gdHJ1ZTtcblxuICAgICAgdGhpcy5fdXAoKTtcblxuICAgIH0uYmluZCh0aGlzKSk7XG5cbiAgICAvL23DqXRvZG9zIGV4cG9zdG9zXG5cbiAgICB0aGlzLmxpc3RlbSA9ICB0aGlzLl9saXN0ZW1FdmVudHM7XG5cbiAgfTtcblxuICBfbGlzdGVtRXZlbnRzICgpIHtcblxuICAgIGNocm9tZS5ydW50aW1lLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihmdW5jdGlvbihyZXF1ZXN0LCBzZW5kZXIsIHNlbmRSZXNwb25zZSkge1xuXG4gICAgICBjb25zb2xlLmxvZyhyZXF1ZXN0KTtcblxuICAgICAgc3dpdGNoKHJlcXVlc3QubWV0aG9kKSB7XG4gICAgICAgIGNhc2UgJ3N5bmNUYXNrcyc6XG5cbiAgICAgICAgICB0aGlzLl9wb3N0VGFza3MoKTtcblxuICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdyZWNlaXZlVGFza3MnOlxuXG4gICAgICAgICAgdGhpcy5fcmVjZWl2ZVRhc2tzKHJlcXVlc3QuYXJncy5saXN0KTtcblxuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29uc29sZS5sb2coJ0ludmFsaWQuLi4nKTtcbiAgICAgIH1cblxuXG4gICAgfS5iaW5kKHRoaXMpKTtcblxuICB9O1xuXG4gIF91cCAoKSB7XG4gICAgY29uc29sZS5sb2codGhpcy5vcHRpb25zLmNvb2tpZXMpO1xuXG4gICAgY29uc29sZS5sb2coJ3Byb250byBwYXJhIHNpbmNyb25pemFyIGUgZmF6ZXIgcXFyIGNvaXNhIG5vIHBpbGdyaW0uLi4nKTtcbiAgfTtcblxuICBfcmVjZWl2ZVRhc2tzIChsaXN0KSB7XG5cbiAgICAgIGlmKCFsaXN0Lmxlbmd0aCkgcmV0dXJuO1xuXG4gICAgICB0aGlzLm9wdGlvbnMudGFza3MgPSBsaXN0O1xuXG5cbiAgfTtcblxuICBfZ2V0Q29va2llIChuYW1lKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy5vcHRpb25zLmNvb2tpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblxuICAgICAgICBpZih0aGlzLm9wdGlvbnMuY29va2llc1tpXS5uYW1lID09PSBuYW1lKVxuICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY29va2llc1tpXTtcbiAgICAgIH1cbiAgfTtcblxuICBfZ2V0QWxsQ29va2llcyAoZG9tYWluLCBjYWxsYmFjaykge1xuICAgICAgY2hyb21lLmNvb2tpZXMuZ2V0QWxsKHtcInVybFwiOiBkb21haW59LCBmdW5jdGlvbihhbGxDb29raWVzKSB7XG4gICAgICAgICAgaWYoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soYWxsQ29va2llcyk7XG4gICAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG5cbiAgX3N5bmNDb29raWVzIChjYWxsYmFjaykge1xuXG4gICAgdGhpcy5fZ2V0QWxsQ29va2llcyh0aGlzLm9wdGlvbnMuZG9tYWluLCBmdW5jdGlvbiAoZGF0YSkge1xuXG4gICAgICB0aGlzLm9wdGlvbnMuY29va2llcyA9IGRhdGE7XG5cbiAgICAgIGlmKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgfVxuXG4gICAgfS5iaW5kKHRoaXMpKTtcblxuICB9O1xuXG4gIC8vc2ltdWxhIHVtIHBvc3Qgbm8gcGlsZ3JpbSBwYXJhIGNhZGFzdHJhciB1bWEgdGFzayBpbmV4aXN0ZW50ZVxuICBfcG9zdFRhc2sgKHRhc2spIHtcblxuICAgIGNvbnNvbGUubG9nKHRhc2spO1xuXG4gICAgbGV0IGNvb2tpZV9sYW5nID0gIHRoaXMuX2dldENvb2tpZSgnTGFuZ3VhZ2UnKTtcbiAgICBsZXQgY29va2llX3BpbGdyaW1BdXRoQ29va2llID0gdGhpcy5fZ2V0Q29va2llKCdwaWxncmltQXV0aENvb2tpZScpO1xuICAgIGxldCBjb29raWVfQVNQWFJPTEVTID0gdGhpcy5fZ2V0Q29va2llKCcuQVNQWFJPTEVTJyk7XG5cbiAgICAvLyBsZXQgaGVhZGVyX2Nvb2tpZSA9IFwiTGFuZ3VhZ2U9RW47IHBpbGdyaW1BdXRoQ29va2llPTYwNUU0RTA1QzY2RTQ1MzA3Q0IxREU4Rjg3NUVBMkFCQTY2MzM0Mjk4MzhCNkUwRjE5RTlDOUVBRkYyRERCQUY3OUJDN0JGMjRFQkRDNEIzOEFEMkVDQUREOTFFNjIwOEE5M0ZGNTI2OEZEOTc2REI4Q0NGNDUwQ0M1OUM5NkYxNDhGRTA3NDZBNjEwQjY4MUJCODdGMjgxNjAxRTE5ODhCNDcwM0YyMjM1MDk2QTQwM0M2MUE0RDFFMjRDMjQ1NjExRjQyMDczNUY2Q0RGMzAzRjZBMDJFNDg4NTQzNUU0NDZERUM1QzNFNzgyRTg0QzNCRDYwQkI3MTUwQTdGRkRDNzgzQkI3QzEyODMzRDQxQTUyOTVFMTRCRDU1ODVBMzsgLkFTUFhST0xFUz1fczBlZlhBbXJCZGhLUURMaTBYLUJ1UnpGOHdLLWkwZEotRkRHeUNWdXVuNnEwNnFqT1pCMnhmenNCYnAyYTVGV3ZkODdCWm5aeHVveVRvaFJoQjRXNnpJT2pORDEtWGoxRl9YczI1RGJKTUNYY0w2LURJY0pBQk5pQVYyejBhUjJ0a21QblVkLWs2Sng3UmpmYm9zeEhib1VSMEUxWExRamJBaXR4aWpHNzVqd3NtYnhqSXpTWEN3dkh4SmlQREFYcmdQVmFGRmpwU2Z3WHg4OHBOYUR4YURfVU15Z2l5STNFd0JTcmR6Tm50MU5jc1JwQ2tUYXFJTW1ybGxCVlJlSjhxcUt6U1NoZDRmckJWSjg0YnRKTWNLbTFwYi1YSy1TcHBYLTZUNUFOeHg2MlhGWTRjMXUxU2JxRHZDVkgyZVgyRGk0NktjSUJSN3dwSGJrU3BwTUdvSE5IYU9IVEdOYzBxUUFEWFluSHZUaXBhUmJ2TkNrMm5DWWJwT2gwU2xZZ1UwRkJTeUlZWFZVTFJRNnoydlB4NDlkTGRRRWRvcTJrQWxvWlFhM0hWeGNiRFkxcUVmVnpWRWNvREp3Zk54cmFvdUlwdmRSaTRUWkRBejdXREhKS0F0Rm1fdWtZV3FIZXZVbzEzY2hIekotbXpHX1hibUZQX1hxeV84LWFNZmtQX29FVTVneE8xSjQ3TExJcnpEWHV0M0Mxa3puOWYyVmpESHhRWlhMRm5meVBidHJQbGJBeGFFUTd4QnkxbU1FMXlzM1g4Y1BucWQ0aXRjSzVzV1N1bEF6N3pKck5TdGNzVEZUak9nUGg0Zmg2dm5HdmhwSWR3NWVXOHJOTVJJUDJBU2ZsalZyc3ZqbExZUTZHaXphMm5XRVRFNkxRRXVzU0thX1NjRDBQSnZidkxKVHFnbU13Qzh1WG03TDM5NTFHWW5EZzAzUEFfbjJXbDVyTWplUnAxanRrTl9yZmdEeWhidEZTcUxfcV9IZkdjZ0ppTTdscjhJamVFS3JlMzZXTlFCbG9lVXVXaUFLbVJyU1hROWRRVkZaLU1XYmRWdERtTVhzcmg1bGJ1WGd4Z2djcjlHYmhnVXhpQnFqRklKMFwiXG4gICAgbGV0IGhlYWRlcl9jb29raWUgPSBcIkxhbmd1YWdlPVwiICsgY29va2llX2xhbmcudmFsdWUgKyBcIjsgcGlsZ3JpbUF1dGhDb29raWU9XCIgKyBjb29raWVfcGlsZ3JpbUF1dGhDb29raWUudmFsdWUgKyBcIjsgLkFTUFhST0xFUz1cIiArIGNvb2tpZV9BU1BYUk9MRVMudmFsdWUgKyBcIlwiXG5cblxuICAgIC8vIHZhciBteWhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuXG4gICAgbGV0IG15aGVhZGVycyA9IHtcbiAgICAgICdBY2NlcHQnOiAnKi8qJyxcbiAgICAgICdBY2NlcHQtRW5jb2RpbmcnOiAnZ3ppcCwgZGVmbGF0ZSwgc2RjaCcsXG4gICAgICAnQWNjZXB0LUxhbmd1YWdlJzogJ2VuLVVTLGVuO3E9MC44JyxcbiAgICAgICdYLVJlcXVlc3RlZC1XaXRoJzogJ1hNTEh0dHBSZXF1ZXN0JyxcbiAgICAgICdDb29raWUnOiBoZWFkZXJfY29va2llXG4gICAgfTtcblxuICAgIGNvbnNvbGUubG9nKG15aGVhZGVycyk7XG5cbiAgICBsZXQgYm9keSA9IHtcbiAgICAgIFByb2plY3RJRDogJzk1ZTA5ZTJiLWE0NWItNDExMy04ZDkyLTc5YWJmYjg4MTQ0MScsIC8vIGludGVybm8sXG4gICAgICBjYlByak1vZGVJRDogMSxcbiAgICAgIElzQ2hlY2tlZDogMCxcbiAgICAgIFRhc2tHcm91cElEOiAnYzllYmI3MGMtMjc4OS00Y2E2LTlkZjktMWI2YmQ4MGRjYzQ5JywgLy8gdGFyZWZhcyBuYW8gZmF0dXJhZGFzXG4gICAgICBUaW1lU2hlZXREYXRlOiBcIjIyLzA1LzIwMTdcIixcbiAgICAgIE5hbWU6IHRhc2suZXhjZXJwdCxcbiAgICAgIHRhc2tTdGFydERhdGU6ICcyMy8wNS8yMDE3IDAwOjAwOjAwJyxcbiAgICAgIHRhc2tFbmREYXRlOiAnMjQvMDUvMjAxNyAwMDowMDowMCcsXG4gICAgICBQbGFubmVkV29yazogMjBcbiAgICB9O1xuXG5cbiAgICAvLyB1cmwgKHJlcXVpcmVkKSwgb3B0aW9ucyAob3B0aW9uYWwpXG4gICAgZmV0Y2godGhpcy5vcHRpb25zLmNyZWF0ZVRhc2ssIHtcblxuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBtb2RlOiAnY29ycycsXG4gICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyhteWhlYWRlcnMpLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcblxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblxuICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuXG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAvLyBFcnJvciA6KFxuICAgIH0pO1xuXG4gIH07XG5cblxuICAvL3BlZ2EgdW1hIGxpc3RhIGRlIHRhcmVmYXMgZSBpdGVyYSBtYW5kYW5kbyBwYXJhIG8gbWV0b2RvIHBvc3RUYXNrXG4gIF9wb3N0VGFza3MgKCkge1xuXG4gICAgZm9yICh2YXIgaSA9IHRoaXMub3B0aW9ucy50YXNrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdGhpcy5fcG9zdFRhc2sodGhpcy5vcHRpb25zLnRhc2tzW2ldKTtcbiAgICB9O1xuXG4gIH07XG5cbn0iLCIvLyBNYWluIGphdmFzY3JpcHQgZW50cnkgcG9pbnRcbi8vIFNob3VsZCBoYW5kbGUgYm9vdHN0cmFwcGluZy9zdGFydGluZyBhcHBsaWNhdGlvblxuXG4vL2ltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgUGlsZ3JpbSBmcm9tICcuLi9fbW9kdWxlcy9waWxncmltL3BpbGdyaW0nO1xuLy8gaW1wb3J0IGNzcyBmcm9tICcuLi9fc3R5bGVzL2Nzc19tYXBfYWxsLmpzb24nO1xuXG4ndXNlIHN0cmljdCc7XG5cblxudmFyIHBpbGdyaW0gPSBuZXcgUGlsZ3JpbSgpO1xuXG5waWxncmltLmxpc3RlbSgpOyJdfQ=="}